<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Video to Text & Key Points</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f4f4f9;
    }
    .container {
      width: 600px;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .input-group {
      display: flex;
      margin-bottom: 20px;
    }
    .input-group input {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .input-group button {
      padding: 10px;
      margin-left: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .input-group button:hover {
      background-color: #45a049;
    }
    .chatbox {
      border: 1px solid #ccc;
      padding: 10px;
      height: 300px;
      overflow-y: scroll;
      margin-bottom: 20px;
      background-color: #fafafa;
    }
    .chatbox .message {
      margin: 10px 0;
    }
    .chatbox .user-msg {
      text-align: right;
      color: #1e7e34;
    }
    .chatbox .bot-msg {
      text-align: left;
      color: #007bff;
    }
    .result-section {
      margin-top: 20px;
    }
    .key-points, .questions {
      padding: 10px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      background-color: #fafafa;
    }
    .button-group {
      display: flex;
      justify-content: space-between;
    }
    .button-group button {
      padding: 10px 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .button-group button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Gen.VITEX</h1>

    <!-- YouTube URL Input Section -->
    <div class="input-group">
      <input type="text" id="youtubeUrl" placeholder="Enter YouTube video URL">
      <button id="convertBtn">Convert</button>
    </div>

    <!-- Chat Box Section -->
    <div class="chatbox" id="chatbox">
      <div class="message bot-msg">endhi ala chusthunav saripoledhaa,sadhuvukoo .</div>
    </div>

    <!-- Chat Input Section -->
    <input type="text" id="userInput" placeholder="Type your message here..." onkeyup="sendMessage(event)">

    <!-- Result Section (Key Points & Questions) -->
    <div class="result-section">
      <div id="keyPoints" class="key-points" style="display: none;">
        <h3>Key Points</h3>
        <ul id="keyPointsList"></ul>
      </div>
      <div id="questions" class="questions" style="display: none;">
        <h3>Related Questions</h3>
        <ul id="questionsList"></ul>
      </div>

      <!-- Buttons to Generate PDF and PPT -->
      <div class="button-group">
        <button id="generatePdfBtn">Generate PDF</button>
        <button id="generatePptBtn">Generate PPT</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.10.0/dist/pptxgen.min.js"></script>

  <script>
    const convertBtn = document.getElementById('convertBtn');
    const youtubeUrlInput = document.getElementById('youtubeUrl');
    const chatbox = document.getElementById('chatbox');
    const userInput = document.getElementById('userInput');
    const keyPointsSection = document.getElementById('keyPoints');
    const keyPointsList = document.getElementById('keyPointsList');
    const questionsSection = document.getElementById('questions');
    const questionsList = document.getElementById('questionsList');
    const generatePdfBtn = document.getElementById('generatePdfBtn');
    const generatePptBtn = document.getElementById('generatePptBtn');

    let transcriptText = ''; // Placeholder for the video transcript

    // Function to handle sending messages in the chatbox
    function sendMessage(event) {
      if (event.key === 'Enter' && userInput.value.trim() !== '') {
        const message = userInput.value.trim();
        displayMessage(message, 'user');
        processUserInput(message);
        userInput.value = ''; // Clear input field
      }
    }

    // Display messages in the chatbox
    function displayMessage(message, sender) {
      const messageElement = document.createElement('div');
      messageElement.classList.add('message');
      messageElement.classList.add(sender === 'user' ? 'user-msg' : 'bot-msg');
      messageElement.textContent = message;
      chatbox.appendChild(messageElement);
      chatbox.scrollTop = chatbox.scrollHeight; // Scroll to bottom
    }

    // Process user input
    function processUserInput(message) {
      if (message.toLowerCase().includes('convert')) {
        const url = youtubeUrlInput.value.trim();
        if (url && isValidYouTubeURL(url)) {
          displayMessage("Processing video...", 'bot');
          convertVideoToText(url);
        } else {
          displayMessage("Please enter a valid YouTube URL.", 'bot');
        }
      }
    }

    // Check if the YouTube URL is valid
    function isValidYouTubeURL(url) {
      const regex = /^(https?:\/\/)?(www\.)?(youtube|youtu|youtube-nocookie)\.(com|be)\/(?:[^\/\n\s]+\/\S+|(?:v|e(?:mbed)?)\/([^&=%\?]{11}))/;
      return regex.test(url);
    }

    // Simulate conversion of video to text (mock function)
    function convertVideoToText(url) {
      // Simulating API call, in real scenario, we'd use a transcription API
      setTimeout(() => {
        transcriptText = "This is a simulated transcript of the video content. The video discusses key aspects of YouTube API usage, its functionalities, and how to interact with it.";

        displayMessage("Video converted to text.", 'bot');
        displayTranscriptText(transcriptText);
      }, 2000);
    }

    // Display the transcript text
    function displayTranscriptText(text) {
      // Display key points and related questions
      displayKeyPoints(text);
      generateQuestions(text);
    }

    // Generate and display key points from the transcript text
    function displayKeyPoints(text) {
      const keyPoints = extractKeyPoints(text);
      keyPointsSection.style.display = 'block';
      keyPointsList.innerHTML = ''; // Clear previous key points

      keyPoints.forEach(point => {
        const li = document.createElement('li');
        li.textContent = point;
        keyPointsList.appendChild(li);
      });
    }

    // Mock key points extraction (in reality, NLP or summarization APIs can be used)
    function extractKeyPoints(text) {
      return [
        "YouTube API allows developers to interact with video content.",
        "You can access video details, comments, and other metadata.",
        "Understanding API requests is key to utilizing YouTube's functionalities."
      ];
    }

    // Generate and display related questions from the transcript text
    function generateQuestions(text) {
      const questions = generateRelatedQuestions(text);
      questionsSection.style.display = 'block';
      questionsList.innerHTML = ''; // Clear previous questions

      questions.forEach(question => {
        const li = document.createElement('li');
        li.textContent = question;
        questionsList.appendChild(li);
      });
    }

    // Mock related question generation (real-world would use NLP models)
    function generateRelatedQuestions(text) {
      return [
        "What is the YouTube API?",
        "How can developers access YouTube video metadata?",
        "What functionalities does the YouTube API provide?"
      ];
    }

    // Generate PDF from the text content
    generatePdfBtn.addEventListener('click', () => {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text(transcriptText, 10, 10);
      doc.save('Transcript.pdf');
    });

    // Generate PPT from the text content
    generatePptBtn.addEventListener('click', () => {
      const pptx = new PptxGenJS();
      const slide = pptx.addSlide();
      slide.addText('Transcript', { x: 1, y: 1, fontSize: 18, fontFace: 'Arial', color: '000000' });
      slide.addText(transcriptText, { x: 1, y: 2, fontSize: 14, fontFace: 'Arial', color: '000000' });
      pptx.writeFile({ fileName: 'Transcript.pptx' });
    });

  </script>
</body>
</html>
